# N5-Arduino

System OverviewThe claw operates on an Automated State Machine. It does not require manual button presses to open/close. Instead, it uses an ultrasonic distance sensor to decide when to grab, hold, or drop objects based on the arm's height from the ground.1. Driverâ€™s Guide (Competition Day)How to drive the robot to make the claw work correctly.STEP 1: The Pickup (Grab)Action: Lower the arm so the claw is within 27 cm of the object/ground.Wait: You must hold the arm steady for 1.5 seconds.Indicator: The claw will close slowly (Servo moves 0 $\to$ 100).Note: If you move the arm away before 1.5 seconds, the timer resets.STEP 2: Transport (Arming)Action: Immediately after the claw closes, LIFT the arm high (above 40 cm).Why: This tells the code "I have successfully grabbed the object." The claw is now "Armed" and ready to travel.STEP 3: The DropAction: Drive to the target zone and lower the arm below 27 cm.Result: The claw will open instantly (no delay).Note: Ensure the drop zone is clear before lowering.STEP 4: ResetAction: Lift the arm back up (above 40 cm) to clear the mechanism.Result: The system resets to "Ready" mode and can grab the next object.2. Safety Features (The "Fumble" Logic)What happens if the claw misses?If the claw closes but you do not lift the arm (height stays below 27 cm):The system assumes a "Fumble" (missed grab).After 3 seconds, the claw will automatically OPEN and reset.Driver Action: Do not panic. Just wait 3 seconds, realign, and the grab timer will start again automatically.3. Logic States ExplainedThe code cycles through these 4 logic states:StateCondition FlagsDescription1. Ready to GrabisOpen=1, isReady=1Sensor looks for ground (< 27cm). Starts 1.5s timer.2. Lifting / VerifyisOpen=0, isReady=0Claw is closed. Waiting for arm to go High (> 40cm) to confirm success OR checks Fumble Timer (3s).3. Ready to DropisOpen=0, isReady=1Object is secured. Waiting for arm to go Low (< 27cm) to release.4. ResettingisOpen=1, isReady=0Just dropped. Waiting for arm to go High (> 40cm) to reset logic.4. Key FunctionsreadDistance():Reads the HC-SR04 sonar sensor. Returns distance in centimeters.Usage: Called every 50ms to update logic.slowClose():Moves the servo from SERVO_OPEN (0) to SERVO_CLOSE (100).Behavior: It uses a loop with a delay to close smoothly rather than snapping shut. This ensures a tighter grip and prevents the object from popping out due to impact.5. Configuration Cheat SheetIf you need to change settings in the pit, edit these lines in the code:SERVO_THRESHOLD (27): Maximum height (cm) to trigger a Grab or Drop. Increase if you can't get low enough.RESET_THRESHOLD (40): Minimum height (cm) to arm the system. Decrease if the arm can't lift that high.INTERVAL (1500): How long (ms) to wait before grabbing. Decrease for faster grabs, Increase for better accuracy.RETRY_TIMER (3000): How long (ms) to wait before auto-opening on a miss.
